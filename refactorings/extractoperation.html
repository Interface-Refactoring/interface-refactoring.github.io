<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.23.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Extract Operation - Interface Refactoring Catalog</title>
<meta name="description" content="also known as: Split Endpoint">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Interface Refactoring Catalog">
<meta property="og:title" content="Extract Operation">
<meta property="og:url" content="/refactorings/extractoperation">


  <meta property="og:description" content="also known as: Split Endpoint">







  <meta property="article:published_time" content="2024-10-11T11:38:39+02:00">






<link rel="canonical" href="/refactorings/extractoperation">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "/"
    
  }
</script>


  <meta name="google-site-verification" content="x8wyOj5Ci0-5V8KvrqNeZ90_I9sOVHog3UqCKVUem28" />






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Interface Refactoring Catalog Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/arduino-light.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', (event) => {
      hljs.registerLanguage("mdsl", function(hljs) {
          return {
            keywords: {
                        // See https://highlightjs.readthedocs.io/en/latest/css-classes-reference.html
                        keyword: "API IPA description data type endpoint operation provider client gateway responsibility serves as exposes offers consumes expecting delivering scenario story supports with a wants to so that via protocol binding resource at element realized as location and mediates from to",
                        literal: 'header payload "GET" "PUT" "POST" "PATCH" "DELETE" "HTTP"', // not sure about this group 
                        operator: "* + ? !",
                        type: "ID D MD L P string int long bool raw Identifier Data Metadata Link",
                        built_in: "PROCESSING_RESOURCE INFORMATION_HOLDER_RESOURCE COLLECTION_RESOURCE STATE_CREATION_OPERATION RETRIEVAL_OPERATION STATE_TRANSITION_OPERATION STATE_DELETION_OPERATION STATE_REPLACEMENT_OPERATION COMPUTATION_FUNCTION Pagination Wish_List Wish_Template Request_Bundle Context_Representation"
                    },
                    contains: [
                        hljs.C_LINE_COMMENT_MODE,
                        hljs.C_BLOCK_COMMENT_MODE,
                        hljs.QUOTE_STRING_MODE
                    ]
          }
      });
      hljs.registerLanguage("cml", function(hljs) {
          return {
              keywords: {
                  keyword: "Aggregate Service",
                  type: "String",
              },
              contains: [
                  hljs.C_LINE_COMMENT_MODE,
                  hljs.C_BLOCK_COMMENT_MODE
              ]
          }
      });
      hljs.initHighlighting();
  });
</script>
<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->



<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">


<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide refactoring">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/logo.png" alt="Interface Refactoring Catalog"></a>
        
        <a class="site-title" href="/">
          Interface Refactoring Catalog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/refactorings/by-stakeholder-concerns">Stakeholder Concerns</a>
            </li><li class="masthead__menu-item">
              <a href="/refactorings/by-smells-drivers">Smells</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/refactorings" itemprop="item"><span itemprop="name">Refactorings</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Extract Operation</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
          <span class="nav__sub-title">Extract Operation</span>
          <ul><li><a href="#context-and-motivation">Context and Motivation</a></li><li><a href="#stakeholder-concerns">Stakeholder Concerns</a></li><li><a href="#initial-position-sketch">Initial Position Sketch</a></li><li><a href="#design-smells">Design Smells</a></li><li><a href="#instructions">Instructions</a></li><li><a href="#target-solution-sketch-evolution-outline">Target Solution Sketch (Evolution Outline)</a></li><li><a href="#example">Example</a></li><li><a href="#hints-and-pitfalls-to-avoid">Hints and Pitfalls to Avoid</a></li><li><a href="#related-content">Related Content</a></li><li><a href="#references">References</a></li></ul>

      </li>
    
    <li>
      <ul>
        <span class="nav__sub-title">Refactorings Index</span>
        
          <li><a href="/refactorings/addwishlist">Add Wish List </a></li>
        
          <li><a href="/refactorings/addwishtemplate">Add Wish Template </a></li>
        
          <li><a href="/refactorings/bundlerequests">Bundle Requests </a></li>
        
          <li><a href="/refactorings/encapsulatecontextrepresentation">Encapsulate Context Representation </a></li>
        
          <li><a href="/refactorings/extractinformationholder">Extract Information Holder </a></li>
        
          <li><a href="/refactorings/extractoperation">Extract Operation </a></li>
        
          <li><a href="/refactorings/inlineinformationholder">Inline Information Holder </a></li>
        
          <li><a href="/refactorings/introducedatatransferobject">Introduce Data Transfer Object </a></li>
        
          <li><a href="/refactorings/introducepagination">Introduce Pagination </a></li>
        
          <li><a href="/refactorings/introduceversionidentifier">Introduce Version Identifier </a></li>
        
          <li><a href="/refactorings/introduceversionmediator">Introduce Version Mediator </a></li>
        
          <li><a href="/refactorings/makerequestconditional">Make Request Conditional </a></li>
        
          <li><a href="/refactorings/mergeendpoints">Merge Endpoints </a></li>
        
          <li><a href="/refactorings/mergeoperations">Merge Operations </a></li>
        
          <li><a href="/refactorings/moveoperation">Move Operation </a></li>
        
          <li><a href="/refactorings/relaxevolutionstrategy">Relax Evolution Strategy </a></li>
        
          <li><a href="/refactorings/renameendpoint">Rename Endpoint </a></li>
        
          <li><a href="/refactorings/renameoperation">Rename Operation </a></li>
        
          <li><a href="/refactorings/renamerepresentationelement">Rename Representation Element </a></li>
        
          <li><a href="/refactorings/segregatecommandsfromqueries">Segregate Commands from Queries </a></li>
        
          <li><a href="/refactorings/splitoperation">Split Operation </a></li>
        
          <li><a href="/refactorings/tightenevolutionstrategy">Tighten Evolution Strategy </a></li>
        
      </ul>
    </li>
    
      <li>
        
          <span class="nav__sub-title">Browse Refactorings</span>
        

        
        <ul>
          
            <li><a href="/refactorings/by-stakeholder-concerns">... by Stakeholder Concerns</a></li>
          
            <li><a href="/refactorings/by-smells-drivers">... by Smells</a></li>
          
            <li><a href="/refactorings">... by Target</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Extras</span>
        

        
        <ul>
          
            <li><a href="/news">News</a></li>
          
            <li><a href="/hints">Hints and Sample System</a></li>
          
            <li><a href="/glossary">Glossary</a></li>
          
            <li><a href="/publications">Articles and Books</a></li>
          
            <li><a href="/about">About the Authors</a></li>
          
            <li><a href="/terms">Terms and License</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  

  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Extract Operation">
    <meta itemprop="description" content="also known as: Split Endpoint">
    <meta itemprop="datePublished" content="2024-10-11T11:38:39+02:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Extract Operation
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <strong>Updated:</strong>
        
        <time datetime="2024-10-07T00:00:00+02:00">October 7, 2024</time>
      </span>
    
    
      <span class="page__meta-workshopped">
        <strong>Published:</strong> EuroPLoP 2024
      </span>
    

    

    
  </p>


        </header>
      

      
        
      

      <section class="page__content" itemprop="text">
        <p>also known as: Split Endpoint</p>

<h2 id="context-and-motivation">Context and Motivation</h2>

<p>One or more API endpoints, for instance, HTTP resources, have been developed, tested, and deployed. One of these endpoints offers multiple operations for clients to call. These operations work with multiple domain concepts. Their functional and technical responsibilities differ regarding stakeholder groups (users, developers, etc.) and their addressed quality concerns. Some operations are process- or activity-oriented, while others offer data storage. At least one operation differs concerning read and/or write access characteristics, access control policies, and data protection requirements. As a consequence, the endpoint serves multiple roles in the API architecture. The operations differ regarding their evolution (e.g., the frequency of changes requiring/leading to new releases).</p>

<p class="notice--primary">As the API provider, I want to focus the responsibilities of an endpoint on a single role so that API clients serving a particular stakeholder group understand the API design intuitively, and the release roadmap and scaling of the endpoint can be optimized for each group of stakeholders and clients.</p>

<h2 id="stakeholder-concerns">Stakeholder Concerns</h2>

<dl>
  <dt><a href="/refactorings/by-stakeholder-concerns/#reliability">#reliability</a> and <a href="/refactorings/by-stakeholder-concerns/#stability">#stability</a></dt>
  <dd>Independent endpoints that do not share the same execution context and resources can be deployed independently; operations co-located in a single endpoint, however, share their deployment characteristics. For instance, if a long-running operation causes an API provider-internal error, its sibling operations might suffer from quality-of-service degradations as well. Nygard [<a href="#ref-Nygard:2018">2018</a>] uses the term stability: “A robust system keeps processing transactions, even when transient impulses, persistent stresses, or component failures disrupt normal processing.”</dd>
  <dt><a href="/refactorings/by-stakeholder-concerns/#single-responsibility-principle">#single-responsibility-principle</a></dt>
  <dd>Architectural principles are affected positively or negatively when APIs are refectored. Here, the <a href="https://medium.com/olzzio/apis-should-get-to-the-point-c79113efa31c">Purposeful, style-Oriented, Isolated, channel-Neutral, and T-shaped (POINT)</a> principles for API design apply; extracting an endpoint can improve <strong>P</strong>, <strong>O</strong>, and <strong>I</strong> (but might harm <strong>T</strong> when looking at a single endpoint and not an entire API).</dd>
  <dt><a href="/refactorings/by-stakeholder-concerns/#independent-deployability">#independent-deployability</a>, <a href="/refactorings/by-stakeholder-concerns/#scalability">#scalability</a></dt>
  <dd>Endpoints can be deployed and then scaled separately, which is one of the defining tenets of microservices-based systems [<a href="#ref-Zimmermann:2017">Zimmermann 2017</a>]. The fewer operations an endpoint exposes, the easier it is to optimize the scaling for those operations.</dd>
  <dt><a href="/refactorings/by-stakeholder-concerns/#security">#security</a></dt>
  <dd>With multiple operations co-located within a single endpoint, it can be challenging to enforce fine-grained access control policies. Refactoring this endpoint into multiple specialized ones allows for more granular control over access permissions and authorization rules. The security requirements for the data an API endpoint exposes may also differ; hence, separating operations can make it easier to apply data protection measures that ensure confidentiality.</dd>
</dl>

<h2 id="initial-position-sketch">Initial Position Sketch</h2>

<p>The design for this interface refactoring looks as follows (notation: <a href="https://microservice-api-patterns.github.io/MDSL-Specification/">MDSL</a>):</p>

<pre><code class="language-mdsl">endpoint type SomeEndpoint
exposes 
  operation operation1 
    expecting payload "RequestMessage1" 
    delivering payload "ResponseMessage1"
   operation operation2 
    expecting payload "RequestMessage2" 
    delivering payload "ResponseMessage2"
</code></pre>

<p>See Figure 1 for a graphical representation of this Initial Position Sketch.</p>

<p><img src="/refactorings/images/ExtractOperation_Initial.png" alt="Extract Operation: Initial Position Sketch. A client uses two different operations (message exchanges 1-2 and 3-4) in an API endpoint for its communication with the API." /></p>

<p>Figure 1: Extract Operation: Initial Position Sketch. A client uses two different operations (message exchanges 1-2 and 3-4) in an API endpoint for its communication with the API.</p>

<p>The refactoring targets are an API endpoint (for instance, an HTTP resource identified with a URI) and one of its operations (for instance, an HTTP verb/method supported by the resource).</p>

<h2 id="design-smells">Design Smells</h2>

<dl>
  <dt><em><a href="/refactorings/by-smells-drivers#role-and-or-responsibility-diffusion">Role and/or responsibility diffusion</a></em></dt>
  <dd>The endpoint is both an <a href="https://api-patterns.org/patterns/responsibility/endpointRoles/InformationHolderResource">Information Holder Resource</a> and a <a href="https://api-patterns.org/patterns/responsibility/endpointRoles/ProcessingResource">Processing Resource</a>, or an <a href="https://api-patterns.org/patterns/responsibility/endpointRoles/InformationHolderResource">Information Holder Resource</a> exposes different types of data in different operations (for instance, both master data and operational data). The endpoint operations may have rather diverse functional and technical responsibilities (read vs. write, for instance). As a consequence of one or more of these smells, it is hard to explain the endpoint purpose.</dd>
  <dt><em><a href="/refactorings/by-smells-drivers#low-cohesion">Low cohesion</a></em></dt>
  <dd>The operations in the endpoint deal with multiple, not necessarily related domain concepts. Consequently, the endpoint has more than one reason to change during its evolution. It serves multiple stakeholder groups and/or its implementation is developed and maintained by multiple teams.</dd>
  <dt><em><a href="/refactorings/by-smells-drivers#rest-principle-s-constraints">REST principle(s) constraints</a></em></dt>
  <dd>A key design constraint imposed by the REST style used by many HTTP APIs is the “unified interface,” which mandates the use of standard HTTP verbs (POST, GET, PUT, PATCH, DELETE, etc.). These verbs come with certain restrictions; for instance, GET and PUT operations should be idempotent. Sometimes, REST constraints limit extensibility when a resource identified by a single URI runs out of verbs for its operations [<a href="#ref-Serbout:2021">Serbout et al. 2022</a>].</dd>
  <dt><em><a href="/refactorings/by-smells-drivers#god-endpoint">God endpoint</a></em></dt>
  <dd>The endpoint and its operations implementations might have to access many data sources or backend systems to assemble responses to requests. Many such dependencies on external systems and data make the API implementation more complicated to operate and evolve. In object-oriented design, a class or object that controls many other system parts is called a “God Class” [<a href="#ref-Riel:1996">Riel 1996</a>].</dd>
  <dt><em><a href="/refactorings/by-smells-drivers#wrong-cuts">Wrong cuts</a></em></dt>
  <dd>The endpoint might have been designed to serve multiple purposes, and the operations might have been chosen to be co-located in the same endpoint. This design decision might have been made based on the wrong assumptions or requirements, leading to a design that is hard to maintain and evolve.</dd>
</dl>

<h2 id="instructions">Instructions</h2>

<p>Follow these steps to extract an endpoint:</p>

<ol>
  <li>Remove the operation from the <a href="https://api-patterns.org/patterns/foundation/APIDescription">API Description</a> of the source endpoint.</li>
  <li>Check the general security policies and the client rights management. For example, authorization rules that use endpoint existence and names to determine whether a client application and end-user are permitted to perform an operation might have to be adjusted.</li>
  <li>Refactor at the code level. For instance, create an additional REST controller class when working with Java and HTTP in Spring and move the implementation of the chosen operation.</li>
  <li>Create an <a href="https://api-patterns.org/patterns/foundation/APIDescription">API Description</a> for the new endpoint that only exposes the extracted operation.</li>
  <li>Adjust the existing integration tests or add additional ones to verify that the original and new endpoints meet their <a href="https://api-patterns.org/patterns/foundation/APIDescription">API Descriptions</a> (both in terms of functional and non-functional characteristics).</li>
  <li>Evaluate whether the roles and responsibilities of the two endpoints are well-separated and that the refactoring resulted in endpoints with higher cohesion.</li>
  <li>Inform all API clients about the change and the version that will introduce it. Provide migration information (or support the transition on a technical level, for instance, with an HTTP redirect [<a href="#ref-rfc7231">Fielding and Reschke 2014</a>]).</li>
</ol>

<p>If necessary, repeat these steps with the remaining operations until the roles and responsibilities of the endpoint have been clarified and the smells resolved.</p>

<h2 id="target-solution-sketch-evolution-outline">Target Solution Sketch (Evolution Outline)</h2>

<p>The following simple and abstract MDSL sketch specifies the result of the refactoring at an abstract level (see Figure 2 for a graphical representation):</p>

<pre><code class="language-mdsl">endpoint type SomeEndpoint
exposes 
  operation operation1 
    expecting payload "RequestMessage1" 
    delivering payload "ResponseMessage1"

endpoint type ExtractedNewEndpoint    
exposes
operation operation2 
    expecting payload "RequestMessage2" 
    delivering payload "ResponseMessage2"
</code></pre>

<p><img src="/refactorings/images/ExtractOperation_Target.png" alt="Extract Operation: Target Solution Sketch. The two conversations (message exchanges 1-2 and 3-4) with the API now go to operations residing in two different API endpoints." /></p>

<p>Figure 2: Extract Operation: Target Solution Sketch. The two conversations (message exchanges 1-2 and 3-4) with the API now go to operations residing in two different API endpoints.</p>

<p>Note that this sketch does not show signs of bad smells in terms of semantics or qualities; the following example does.</p>

<h2 id="example">Example</h2>

<p>Sometimes, it makes sense to separate commands from queries (see <a href="/refactorings/segregatecommandsfromqueries">Segregate Commands from Queries</a>). This refactoring is a particular case of endpoint extraction. Hence, the following example can be seen as an example of both <em>Segregate Commands from Queries</em> and <em>Extract Operation</em>. It starts from a Domain-Driven Design (DDD) featuring a single Aggregate [<a href="#ref-Evans:2003">Evans 2003</a>].</p>

<pre><code class="language-cml">Aggregate PublicationEndpoint {
  Service PublicationManagementFacade {
    // a state creation/state transition operation:
    @PaperId add(@PublicationEntryDTO newEntry);
        
    // retrieval operations:
    @PublicationArchive dumpPublicationArchive();
    Set&lt;@PublicationEntryDTO&gt;
      lookupPublicationsFromAuthor(String author);
    String exportAsBibtex(@PaperId paperId);
        
    // computation operations (stateless):
    String convertToBibtex(@PublicationEntryDTO entry); 
  }
}
</code></pre>

<p>The notation in the above snippet is <a href="https://contextmapper.org/docs/language-reference/">Context Mapper Domain-Specific Language (CML)</a> [<a href="#ref-Kapferer-Zimmermann-CM-ARs:2020">Kapferer and Zimmermann 2020</a>]. Context Mapper is a modeling framework for DDD that provides a domain-specific language. DDD can be seen as a form of pattern-oriented, object-oriented analysis and design; “Design Practice Reference” contains introductions to tactic and strategic DDD [<a href="#ref-DPR:2021">Zimmermann and Stocker 2021</a>].</p>

<p>This single publication management Aggregate (and API endpoint) can be split into two, leading to this design:</p>

<pre><code class="language-cml">Aggregate PublicationCommandsEndpoint {
  Service PublicationManagementCommandFacade {
    // a state creation/state transition operation:
    @PaperId add(@PublicationEntryDTO newEntry);

    // computation operations (stateless):
    String convertToBibtex(@PublicationEntryDTO entry); 
  }
}

Aggregate PublicationQueriesEndpoint {
  Service PublicationManagementQueryFacade {
    // retrieval operations:
    @PublicationArchive dumpPublicationArchive();
    Set&lt;@PublicationEntryDTO&gt;
      lookupPublicationsFromAuthor(String author);
    String exportAsBibtex(@PaperId paperId);
  }
}
</code></pre>

<p>Note that this design violates principles such as single responsibility, high cohesion, and low coupling because Bibtex-related operations appear in both endpoints. In response, the <a href="/refactorings/moveoperation">Move Operation</a> refactoring can be applied on <code>convertToBibtex</code>. A third endpoint that exposes the two BibTeX-related operations can also be introduced.</p>

<h2 id="hints-and-pitfalls-to-avoid">Hints and Pitfalls to Avoid</h2>

<p>When applying this refactoring, API designers have to make sure that:</p>

<ul>
  <li>Concurrent access to business logic and database from two presentation layers, a.k.a. API endpoints, does not cause issues such as lost updates, phantom reads, deadlocks, and so on [<a href="#ref-PoEAA">Fowler 2002</a>].</li>
  <li>Performance and independent deployability improve as desired (loose coupling of the original and new endpoint). Extracting an endpoint to focus on a single role redistributes the existing responsibilities and logic across multiple endpoints. This redistribution could affect the performance of the API, especially if there are increased interdependencies or additional network calls are introduced. Proper load testing and performance analysis should be conducted to ensure that the refactored API can handle the expected workload and achieve satisfactory response times.</li>
  <li>Maintainability does not suffer because of design erosion, duplication of Published Language [<a href="#ref-Evans:2003">Evans 2003</a>], and so on. The refactored endpoints may depend on other services or resources within the system. It is essential to carefully manage and coordinate these dependencies to ensure the refactored endpoints can operate independently and reliably.</li>
</ul>

<h2 id="related-content">Related Content</h2>

<p>The <a href="/refactorings/extractinformationholder">Extract Information Holder</a> refactoring can be applied in preparation for this refactoring.</p>

<p>When following the <a href="https://samnewman.io/patterns/architectural/bff/">Backends For Frontends</a> pattern, it might be helpful to extract an endpoint to serve a particular frontend.</p>

<p>This refactoring is reverted by <a href="/refactorings/mergeendpoints">Merge Endpoints</a>. <a href="/refactorings/segregatecommandsfromqueries">Segregate Commands from Queries</a> describes endpoint extraction for a particular reason. <em>Move Operation</em> has a similar purpose and nature but does not create a new endpoint.</p>

<p>The <a href="https://martinfowler.com/bliki/StranglerFigApplication.html">Strangler Fig Application</a> pattern describes an approach to migrating a legacy system incrementally by replacing specific functionality with new applications and services instead of replacing it <em>immediately</em>. The <a href="/refactorings/extractoperation">Extract Operation</a> refactoring applied to the strangled legacy system can support such an approach. A backend system exposing multiple service endpoints is generally easier to update incrementally (and replace eventually) than a more monolithic one. The blog post <a href="https://shopify.engineering/refactoring-legacy-code-strangler-fig-pattern">“Refactoring Legacy Code with the Strangler Fig Pattern”</a> provides detailed step-by-step explanations.</p>

<h2 id="references">References</h2>

<div id="refs" class="references csl-bib-body hanging-indent">

  <div id="ref-Evans:2003" class="csl-entry">

    <p>Evans, Eric. 2003. <em>Domain-Driven Design: Tacking Complexity in the Heart of Software</em>. Addison-Wesley.</p>

  </div>

  <div id="ref-rfc7231" class="csl-entry">

    <p>Fielding, Roy T., and Julian Reschke. 2014. “Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content.” Request for Comments. RFC 7231; RFC Editor. <a href="https://doi.org/10.17487/RFC7231">https://doi.org/10.17487/RFC7231</a>.</p>

  </div>

  <div id="ref-PoEAA" class="csl-entry">

    <p>Fowler, Martin. 2002. <em>Patterns of Enterprise Application Architecture</em>. Boston, MA, USA: Addison-Wesley Longman Publishing Co., Inc.</p>

  </div>

  <div id="ref-Kapferer-Zimmermann-CM-ARs:2020" class="csl-entry">

    <p>Kapferer, Stefan, and Olaf Zimmermann. 2020. “Domain-Driven Service Design.” In <em>Service-Oriented Computing</em>, edited by Schahram Dustdar, 189–208. Springer International Publishing. <a href="https://doi.org/10.1007/978-3-030-64846-6_11">https://doi.org/10.1007/978-3-030-64846-6_11</a>.</p>

  </div>

  <div id="ref-Nygard:2018" class="csl-entry">

    <p>Nygard, Michael T. 2018. <em>Release It! Design and Deploy Production-Ready Software</em>. 2nd ed. Raleigh, NC: Pragmatic Bookshelf. <a href="https://learning.oreilly.com/library/view/release-it-2nd/9781680504552/">https://learning.oreilly.com/library/view/release-it-2nd/9781680504552/</a>.</p>

  </div>

  <div id="ref-Riel:1996" class="csl-entry">

    <p>Riel, Arthur J. 1996. <em>Object-Oriented Design Heuristics</em>. Reading, MA: Addison-Wesley.</p>

  </div>

  <div id="ref-Serbout:2021" class="csl-entry">

    <p>Serbout, Souhaila, Cesare Pautasso, Uwe Zdun, and Olaf Zimmermann. 2022. “From OpenAPI Fragments to API Pattern Primitives and Design Smells.” In <em>26th European Conference on Pattern Languages of Programs</em>. EuroPLoP’21. New York, NY, USA: Association for Computing Machinery. <a href="https://doi.org/10.1145/3489449.3489998">https://doi.org/10.1145/3489449.3489998</a>.</p>

  </div>

  <div id="ref-Zimmermann:2017" class="csl-entry">

    <p>Zimmermann, Olaf. 2017. “Microservices Tenets.” <em>Comput. Sci. Res. Dev.</em> 32 (3-4): 301–10. <a href="https://doi.org/10.1007/S00450-016-0337-0">https://doi.org/10.1007/S00450-016-0337-0</a>.</p>

  </div>

  <div id="ref-DPR:2021" class="csl-entry">

    <p>Zimmermann, Olaf, and Mirko Stocker. 2021. <em>Design Practice Reference - Guides and Templates to Craft Quality Software in Style</em>. LeanPub. <a href="https://leanpub.com/dpr">https://leanpub.com/dpr</a>.</p>

  </div>

</div>

        
      </section>

      <footer class="page__meta">
        
        


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/refactorings/extractinformationholder" class="pagination--pager" title="Extract Information Holder
">Previous</a>
    
    
      <a href="/refactorings/inlineinformationholder" class="pagination--pager" title="Inline Information Holder
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<script>
  var coll = document.getElementsByClassName("collapsible");
  var i;

  for (i = 0; i < coll.length; i++) {
    coll[i].addEventListener("click", function() {
      this.classList.toggle("active");
    });
  }
</script>

<script>
  function collapseAll() {
    var collapsible = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
      coll[i].classList.remove("active");
    }
  }

  function expandAll() {
    var collapsible = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
      coll[i].classList.add("active");
    }
  }
  </script>

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://twitter.com/m_st" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/Interface-Refactoring/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 Mirko Stocker &amp; Olaf Zimmermann. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>





<!-- Matomo -->
<script type="text/javascript">
  var _paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//matomo.microservice-api-patterns.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->









  </body>
</html>
