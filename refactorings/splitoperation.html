<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.23.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Split Operation - Interface Refactoring Catalog</title>
<meta name="description" content="also known as: Decompose API Call">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Interface Refactoring Catalog">
<meta property="og:title" content="Split Operation">
<meta property="og:url" content="/refactorings/splitoperation">


  <meta property="og:description" content="also known as: Decompose API Call">







  <meta property="article:published_time" content="2024-10-11T11:38:39+02:00">






<link rel="canonical" href="/refactorings/splitoperation">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "/"
    
  }
</script>


  <meta name="google-site-verification" content="x8wyOj5Ci0-5V8KvrqNeZ90_I9sOVHog3UqCKVUem28" />






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Interface Refactoring Catalog Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/arduino-light.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', (event) => {
      hljs.registerLanguage("mdsl", function(hljs) {
          return {
            keywords: {
                        // See https://highlightjs.readthedocs.io/en/latest/css-classes-reference.html
                        keyword: "API IPA description data type endpoint operation provider client gateway responsibility serves as exposes offers consumes expecting delivering scenario story supports with a wants to so that via protocol binding resource at element realized as location and mediates from to",
                        literal: 'header payload "GET" "PUT" "POST" "PATCH" "DELETE" "HTTP"', // not sure about this group 
                        operator: "* + ? !",
                        type: "ID D MD L P string int long bool raw Identifier Data Metadata Link",
                        built_in: "PROCESSING_RESOURCE INFORMATION_HOLDER_RESOURCE COLLECTION_RESOURCE STATE_CREATION_OPERATION RETRIEVAL_OPERATION STATE_TRANSITION_OPERATION STATE_DELETION_OPERATION STATE_REPLACEMENT_OPERATION COMPUTATION_FUNCTION Pagination Wish_List Wish_Template Request_Bundle Context_Representation"
                    },
                    contains: [
                        hljs.C_LINE_COMMENT_MODE,
                        hljs.C_BLOCK_COMMENT_MODE,
                        hljs.QUOTE_STRING_MODE
                    ]
          }
      });
      hljs.registerLanguage("cml", function(hljs) {
          return {
              keywords: {
                  keyword: "Aggregate Service",
                  type: "String",
              },
              contains: [
                  hljs.C_LINE_COMMENT_MODE,
                  hljs.C_BLOCK_COMMENT_MODE
              ]
          }
      });
      hljs.initHighlighting();
  });
</script>
<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->



<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">


<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide refactoring">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/logo.png" alt="Interface Refactoring Catalog"></a>
        
        <a class="site-title" href="/">
          Interface Refactoring Catalog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/refactorings/by-stakeholder-concerns">Stakeholder Concerns</a>
            </li><li class="masthead__menu-item">
              <a href="/refactorings/by-smells-drivers">Smells</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/refactorings" itemprop="item"><span itemprop="name">Refactorings</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Split Operation</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
          <span class="nav__sub-title">Split Operation</span>
          <ul><li><a href="#context-and-motivation">Context and Motivation</a></li><li><a href="#stakeholder-concerns">Stakeholder Concerns</a></li><li><a href="#initial-position-sketch">Initial Position Sketch</a></li><li><a href="#design-smells">Design Smells</a></li><li><a href="#instructions">Instructions</a></li><li><a href="#target-solution-sketch-evolution-outline">Target Solution Sketch (Evolution Outline)</a></li><li><a href="#examples">Example(s)</a></li><li><a href="#hints-and-pitfalls-to-avoid">Hints and Pitfalls to Avoid</a></li><li><a href="#related-content">Related Content</a></li><li><a href="#references">References</a></li></ul>

      </li>
    
    <li>
      <ul>
        <span class="nav__sub-title">Refactorings Index</span>
        
          <li><a href="/refactorings/addwishlist">Add Wish List </a></li>
        
          <li><a href="/refactorings/addwishtemplate">Add Wish Template </a></li>
        
          <li><a href="/refactorings/bundlerequests">Bundle Requests </a></li>
        
          <li><a href="/refactorings/encapsulatecontextrepresentation">Encapsulate Context Representation </a></li>
        
          <li><a href="/refactorings/extractinformationholder">Extract Information Holder </a></li>
        
          <li><a href="/refactorings/extractoperation">Extract Operation </a></li>
        
          <li><a href="/refactorings/inlineinformationholder">Inline Information Holder </a></li>
        
          <li><a href="/refactorings/introducedatatransferobject">Introduce Data Transfer Object </a></li>
        
          <li><a href="/refactorings/introducepagination">Introduce Pagination </a></li>
        
          <li><a href="/refactorings/introduceversionidentifier">Introduce Version Identifier </a></li>
        
          <li><a href="/refactorings/introduceversionmediator">Introduce Version Mediator </a></li>
        
          <li><a href="/refactorings/makerequestconditional">Make Request Conditional </a></li>
        
          <li><a href="/refactorings/mergeendpoints">Merge Endpoints </a></li>
        
          <li><a href="/refactorings/mergeoperations">Merge Operations </a></li>
        
          <li><a href="/refactorings/moveoperation">Move Operation </a></li>
        
          <li><a href="/refactorings/relaxevolutionstrategy">Relax Evolution Strategy </a></li>
        
          <li><a href="/refactorings/renameendpoint">Rename Endpoint </a></li>
        
          <li><a href="/refactorings/renameoperation">Rename Operation </a></li>
        
          <li><a href="/refactorings/renamerepresentationelement">Rename Representation Element </a></li>
        
          <li><a href="/refactorings/segregatecommandsfromqueries">Segregate Commands from Queries </a></li>
        
          <li><a href="/refactorings/splitoperation">Split Operation </a></li>
        
          <li><a href="/refactorings/tightenevolutionstrategy">Tighten Evolution Strategy </a></li>
        
      </ul>
    </li>
    
      <li>
        
          <span class="nav__sub-title">Browse Refactorings</span>
        

        
        <ul>
          
            <li><a href="/refactorings/by-stakeholder-concerns">... by Stakeholder Concerns</a></li>
          
            <li><a href="/refactorings/by-smells-drivers">... by Smells</a></li>
          
            <li><a href="/refactorings">... by Target</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Extras</span>
        

        
        <ul>
          
            <li><a href="/news">News</a></li>
          
            <li><a href="/hints">Hints and Sample System</a></li>
          
            <li><a href="/glossary">Glossary</a></li>
          
            <li><a href="/publications">Articles and Books</a></li>
          
            <li><a href="/about">About the Authors</a></li>
          
            <li><a href="/terms">Terms and License</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  

  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Split Operation">
    <meta itemprop="description" content="also known as: Decompose API Call">
    <meta itemprop="datePublished" content="2024-10-11T11:38:39+02:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Split Operation
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <strong>Updated:</strong>
        
        <time datetime="2023-10-06T00:00:00+02:00">October 6, 2023</time>
      </span>
    
    
      <span class="page__meta-workshopped">
        <strong>Published:</strong> EuroPLoP 2023
      </span>
    

    

    
  </p>


        </header>
      

      
        
      

      <section class="page__content" itemprop="text">
        <p>also known as: Decompose API Call</p>

<h2 id="context-and-motivation">Context and Motivation</h2>

<p>An API with endpoints and operations has been defined and implemented. Some operations acquire multiple responsibilities because new capabilities are added to the API. For example, an operation might accept several types of request messages that lead to different parts of execution logic in the API implementation.</p>

<p class="notice--primary">As an API provider, I want to offer endpoints that expose operations with distinct responsibilities so that the API is easy to understand and use for client developers and can be modified rapidly and flexibly by provider developers.</p>

<h2 id="stakeholder-concerns">Stakeholder Concerns</h2>

<dl>
  <dt><a href="/refactorings/by-stakeholder-concerns/#single-responsibility-principle">#single-responsibility-principle</a> and <a href="/refactorings/by-stakeholder-concerns/#understandability">#understandability</a></dt>
  <dd>An API that offers endpoints with operations that follow the <em>single responsibility principle</em> is easier to understand for clients because operations are focused and do not offer extra capabilities that not all clients use. The API provider team also benefits from a lower complexity of the implementation.</dd>
  <dt><a href="/refactorings/by-stakeholder-concerns/#maintainability">#maintainability</a>, <a href="/refactorings/by-stakeholder-concerns/#evolvability">#evolvability</a></dt>
  <dd>Operations that follow the <em>single responsibility principle</em> are easier to maintain and evolve, for instance, because their API provider only has a single reason to change their request and response message structure and content when evolving the API. Changing an operation that does many things is unnecessarily complex if the change only affects certain aspects of the operation; unexpected side effects may occur. For example, deprecating the operation is more complicated if it has multiple stakeholders.</dd>
  <dt><a href="/refactorings/by-stakeholder-concerns/#testability">#testability</a></dt>
  <dd>Test cases have to cover all, and all combinations of, the many things the operation is in charge of. Testing such an operation is more complex than testing a single-responsibility operation.</dd>
  <dt><a href="/refactorings/by-stakeholder-concerns/#security">#security</a></dt>
  <dd>Access restrictions of an API can be implemented on different levels: whole API, per endpoint, individual operations, or even depending on the executed control flow paths in the implementation of operations or the data accessed. Securing an operation that does many things is complex. The access control list must include the superset of all involved participants; changing it has a significant impact.</dd>
</dl>

<h2 id="initial-position-sketch">Initial Position Sketch</h2>

<p>The implementation logic chosen by the operation depends on data sent by the client (represented by the <a href="https://api-patterns.org/patterns/structure/elementStereotypes/MetadataElement">Metadata Element</a>). This branching parameter could take the form of a boolean parameter, an enumeration, or any other value obtained from the request message or the resource state. For example, the request body could contain the data of a resource representation, and depending on whether that resource is already known to the API, it is either updated or created. Figure 1 visualizes this initial position.</p>

<p><img src="/refactorings/images/SplitOperation_Initial.png" alt="Split Operation: Initial Position Sketch. A client sends a request (1) that includes metadata, such as an enumeration value or boolean flag. The provider uses this information to steer the control flow, choosing between operations (Op1, Op2) to execute and compose a response message (2). This metadata might be optional, as shown in the second exchange (Request 3, Response 4). The provider might choose a default operation or even return an error message in that case." /></p>

<p>Figure 1: Split Operation: Initial Position Sketch. A client sends a request (1) that includes metadata, such as an enumeration value or boolean flag. The provider uses this information to steer the control flow, choosing between operations (Op1, Op2) to execute and compose a response message (2). This metadata might be optional, as shown in the second exchange (Request 3, Response 4). The provider might choose a default operation or even return an error message in that case.</p>

<p>This refactoring targets an endpoint implementation and its request and response messages.</p>

<h2 id="design-smells">Design Smells</h2>

<dl>
  <dt><em><a href="/refactorings/by-smells-drivers#role-and-or-responsibility-diffusion">Role and/or responsibility diffusion</a></em> and <em><a href="/refactorings/by-smells-drivers#low-cohesion">low cohesion</a></em></dt>
  <dd>An operation does (too) many things. Clients have to understand all these things to use the operation correctly. Its request message is rather deeply structured and may contain optional, generic, or variable parts to express diverse input options. This complexity may lead to errors and a degraded developer experience. The internal cohesion of the operation is low.</dd>
  <dt><em><a href="/refactorings/by-smells-drivers#combinatorial-explosion-of-input-options">Combinatorial explosion of input options</a></em></dt>
  <dd>Boolean parameters or other flags that determine the execution path lead to a combinatorial explosion of possibilities. Explaining these options bloats the <a href="https://api-patterns.org/patterns/foundation/APIDescription">API Description</a> and is problematic for the client, who has to understand this complex option space to prepare valid requests, and the provider, who has to validate and process the parameter handling. API testing on the client and provider side is also complicated.</dd>
  <dt><em><a href="/refactorings/by-smells-drivers#change-log-jitter">Change log jitter</a></em> or <em><a href="/refactorings/by-smells-drivers#commit-chaos">commit chaos</a></em></dt>
  <dd>The operation has been, and continues to be, modified frequently, according to the commit logs kept by the version control system. Frequent changes may indicate that the operation has too many responsibilities and is not focused enough.</dd>
</dl>

<h2 id="instructions">Instructions</h2>

<p>To split an operation, the following steps apply:</p>

<ol>
  <li>Copy the operation implementation, remove the branching metadata parameter (in the copy), and delete the part of the implementation that is no longer needed for the new operation.</li>
  <li>(Optional) If there is common code in the two operations, extract it into a new method and call it from both operations. This step is optional because the shared code might be small enough to be inlined in both operations (consider the Rule of Three of refactoring<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup> by Fowler [<a href="#ref-Fowler2018">2018</a>]).</li>
  <li>Expose the new operation to clients. Depending on the underlying technology, this can be non-trivial. When using HTTP, choosing a different (previously unused) verb might be appropriate for the new operation. See Singjai et al. [<a href="#ref-Singjai:2021">2021</a>] for a collection of patterns on designing API operations.</li>
  <li>Copy the tests covering the implementation parts that now reside in the copy. Remove the obsolete branching metadata parameter from the tests, adjust the test data and assertions, and ensure the tests pass.</li>
  <li>Include the newly created operation in the <a href="https://api-patterns.org/patterns/foundation/APIDescription">API Description</a>. Inform clients that a new operation now covers the previous behavior. The decision logic previously encoded on the provider side must now be implemented on the client side instead of just passing a branching parameter.</li>
  <li>If access to the original operation was restricted to specific clients, apply the same security rules to the new operation.</li>
  <li>If necessary, to avoid breaking changes, mark the branching metadata parameter as deprecated or immediately remove it, along with any unused code in the original operation implementation. Note that this decision depends on the lifecycle guarantees given to clients, as documented as one of the <a href="https://www.api-patterns.org/patterns/evolution/">Evolution Patterns</a>.</li>
</ol>

<p>For backward compatibility, a Content-Based Router [<a href="#ref-Hohpe:2003">Hohpe and Woolf 2003</a>] can forward requests to the correct operation.</p>

<h2 id="target-solution-sketch-evolution-outline">Target Solution Sketch (Evolution Outline)</h2>

<p>After the refactoring, the behavior of the original operation is cut into two parts, which are implemented by two distinct operations (“Op1” and “Op2”).</p>

<p><img src="/refactorings/images/SplitOperation_Target.png" alt="Split Operation: Target Solution Sketch. Instead of using metadata parameters to steer the provider behavior, two distinct operations (Op1, Op2) are offered. Clients can invoke one (Request 1, Response 2) or the other (Request 3, Response 4)." /></p>

<p>Figure 2: Split Operation: Target Solution Sketch. Instead of using metadata parameters to steer the provider behavior, two distinct operations (Op1, Op2) are offered. Clients can invoke one (Request 1, Response 2) or the other (Request 3, Response 4).</p>

<p>Splitting the operation into two (or more) distinct operations makes each one easier to use and maintain. No provider-side dispatching or branching logic is required anymore. As a downside, the client implementation might become more complex because it has to decide which operation to call. The amount of request-response message exchanges usually stays the same, though.</p>

<h2 id="examples">Example(s)</h2>

<p>The following example from a construction management API shows a Spring Boot implementation of an endpoint that offers an <code>updateConstruction</code> operation to modify the data of a particular building site, specified by the <code>id</code> parameter:</p>

<pre><code class="language-java">@PutMapping("/constructions/{id}")
public ResponseEntity&lt;Construction&gt; updateConstruction(
    @PathVariable(value = "id") Long id,
    @PathVariable(value = "partial-update") Boolean partial,
    @NotNull @RequestBody Construction construction) {

    if (!constructionRepository.existsById(id)) {
        throw new ResponseStatusException(
            HttpStatus.BAD_REQUEST, "Entity not found");
    }

    Construction result;
    if (partial) {
        result = constructionRepository
            .findById(construction.getId())
            .map(existingConstruction -&gt; {
                if (construction.getName() != null) {
                    existingConstruction.setName(
                        construction.getName());
                }
                // repeat this for all attributes
                return existingConstruction;
            })
            .map(constructionRepository::save).get();
    } else {
        result = constructionRepository.save(construction);
    }

    return ResponseEntity.ok().body(result);
}
</code></pre>

<p>The operation takes a boolean <code>partialUpdate</code> parameter. If it is set to <code>true</code>, the attributes that the client provides in the request body are overwritten. If <code>partialUpdate</code> is <code>false</code>, the entire entity is replaced, as shown in the <code>else</code> block.</p>

<p>HTTP provides the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PATCH"><code>PATCH</code></a> verb to represent partial updates (whereas <code>PUT</code> methods are supposed to replace the entire resource). So we can move the “patch” parts of the operation to a new operation:</p>

<pre><code class="language-java">@PatchMapping("/constructions/{id}")
public ResponseEntity&lt;Construction&gt; updatePartially(
    @PathVariable(value = "id") Long id,
    @NotNull @RequestBody Construction construction) {

    if (!constructionRepository.existsById(id)) {
        throw new ResponseStatusException(
            HttpStatus.BAD_REQUEST, "Entity not found");
    }

    Construction result = constructionRepository
        .findById(construction.getId())
        .map(existingConstruction -&gt; {
            if (construction.getName() != null) {
                existingConstruction.setName(
                    construction.getName());
            }
            // repeat this for all attributes
            return existingConstruction;
        })
        .map(constructionRepository::save).get();

    return ResponseEntity.ok().body(result);
}
</code></pre>

<p>Note the <code>PatchMapping</code> annotation on the <code>updatePartially</code> operation that was added. The old <code>updateConstruction</code> operation has become much simpler now (the <code>+</code> and <code>-</code> stand for added and removed lines, respectively):</p>

<pre><code class="language-diff"> @PutMapping("/constructions/{id}")
 public ResponseEntity&lt;Construction&gt; updateConstruction(
     @PathVariable(value = "id") Long id,
-    @PathVariable(value = "partial-update") Boolean partial,
     @NotNull @RequestBody Construction construction) {
    if (!constructionRepository.existsById(id)) {
         throw new ResponseStatusException(
             HttpStatus.BAD_REQUEST, "Entity not found");
    }
+   Construction result = 
+       constructionRepository.save(construction);
-   if (partial) {
-       result = constructionRepository
-           .findById(construction.getId())
-           .map(existingConstruction -&gt; {
-               if (construction.getName() != null) {
-                   existingConstruction.setName(
-                       construction.getName());
-               }
-               // repeat this for all attributes
-               return existingConstruction;
-           })
-           .map(constructionRepository::save).get();
-   } else {
-       result = constructionRepository.save(construction);
-   }
    return ResponseEntity.ok().body(result);
 }
</code></pre>

<p>In this example, no operation in the endpoint had a <code>PatchMapping</code> so far. If this had been the case, we would have had to introduce a new endpoint for the split-off operation and apply <a href="/refactorings/moveoperation">Move Operation</a> to move either operation to the new endpoint.</p>

<p>Even though the method name <code>updateConstruction</code> is an implementation detail and not exposed to API clients, it could also be renamed. For example, <code>replaceConstruction</code> would fit better with the new responsibility of the method.</p>

<h2 id="hints-and-pitfalls-to-avoid">Hints and Pitfalls to Avoid</h2>

<p>When using HTTP, follow the conventions of the protocol. For example, a PUT request should be <a href="https://www.baeldung.com/cs/idempotent-operations">idempotent</a>, meaning that the result of sending such a request is the same whether it has been sent exactly once or multiple times. In contrast, a POST request is not necessarily idempotent. Sending it multiple times might lead to incorrect provider-side state, such as duplicated data. Not following such conventions confuses clients and may cause API usage bugs.</p>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections">HTTP redirections</a> provide a technical solution for informing clients about the new operation [<a href="#ref-rfc7231">Fielding and Reschke 2014</a>]. This approach only works if the URI changes. Using redirects to tell clients to use another HTTP verb is not possible.</p>

<p>With respect to security concerns, the split-off operation should probably be accessible to the same clients as the original operation if authentication and authorization are required.</p>

<p>Possible impacts on <a href="https://api-patterns.org/patterns/quality/qualityManagementAndGovernance/RateLimit">Rate Limits</a>, monitoring, caching, and other aspects of the API should be considered as well.</p>

<h2 id="related-content">Related Content</h2>

<p><a href="/refactorings/mergeoperations">Merge Operations</a> is the inverse refactoring. <a href="/refactorings/addwishlist">Add Wish List</a> can also combine two <a href="https://api-patterns.org/patterns/responsibility/operationResponsibilities/RetrievalOperation">Retrieval Operations</a> that return related data.</p>

<p>Once an operation has been split into two, one can also be moved to a different endpoint with the <a href="/refactorings/moveoperation">Move Operation</a> refactoring.</p>

<p>When refactoring the API implementation, the <a href="https://refactoring.guru/extract-method">Extract Method</a> [<a href="#ref-Fowler2018">Fowler 2018</a>] refactoring is eligible.</p>

<p>The correct use of HTTP verbs and many other REST implementation hints are explained in the RESTful Web Services Cookbook [<a href="#ref-Allamaraju:2010">Allamaraju 2010</a>].</p>

<h2 id="references">References</h2>

<div id="refs" class="references csl-bib-body hanging-indent">

  <div id="ref-Allamaraju:2010" class="csl-entry">

    <p>Allamaraju, Subbu. 2010. <em>RESTful Web Services Cookbook</em>. O’Reilly.</p>

  </div>

  <div id="ref-rfc7231" class="csl-entry">

    <p>Fielding, Roy T., and Julian Reschke. 2014. “Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content.” Request for Comments. RFC 7231; RFC Editor. <a href="https://doi.org/10.17487/RFC7231">https://doi.org/10.17487/RFC7231</a>.</p>

  </div>

  <div id="ref-Fowler2018" class="csl-entry">

    <p>Fowler, Martin. 2018. <em>Refactoring: Improving the Design of Existing Code</em>. 2nd ed. Addison-Wesley Signature Series (Fowler). Boston, MA: Addison-Wesley.</p>

  </div>

  <div id="ref-Hohpe:2003" class="csl-entry">

    <p>Hohpe, Gregor, and Bobby Woolf. 2003. <em>Enterprise Integration Patterns: Designing, Building, and Deploying Messaging Solutions</em>. Addison-Wesley.</p>

  </div>

  <div id="ref-Singjai:2021" class="csl-entry">

    <p>Singjai, Apitchaka, Uwe Zdun, Olaf Zimmermann, Mirko Stocker, and Cesare Pautasso. 2021. “Patterns on Designing API Endpoint Operations.” Virtual: ACM; ACM.</p>

  </div>

</div>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>Not to be confused with the Rule of Three of the patterns community: Only call it a pattern if there are at least three known uses (<a href="https://wiki.c2.com/?RuleOfThree">https://wiki.c2.com/?RuleOfThree</a>). <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

        
      </section>

      <footer class="page__meta">
        
        


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/refactorings/segregatecommandsfromqueries" class="pagination--pager" title="Segregate Commands from Queries
">Previous</a>
    
    
      <a href="/refactorings/tightenevolutionstrategy" class="pagination--pager" title="Tighten Evolution Strategy
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<script>
  var coll = document.getElementsByClassName("collapsible");
  var i;

  for (i = 0; i < coll.length; i++) {
    coll[i].addEventListener("click", function() {
      this.classList.toggle("active");
    });
  }
</script>

<script>
  function collapseAll() {
    var collapsible = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
      coll[i].classList.remove("active");
    }
  }

  function expandAll() {
    var collapsible = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
      coll[i].classList.add("active");
    }
  }
  </script>

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://twitter.com/m_st" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/Interface-Refactoring/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 Mirko Stocker &amp; Olaf Zimmermann. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>





<!-- Matomo -->
<script type="text/javascript">
  var _paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//matomo.microservice-api-patterns.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->









  </body>
</html>
